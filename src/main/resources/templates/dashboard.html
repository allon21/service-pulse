<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ServicePulse — Dashboard</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-dark mb-4">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">ServicePulse</span>
        <a href="/logout" class="btn btn-outline-light btn-sm">Logout</a>
    </div>
</nav>

<div class="container">
    <h2 class="mb-4">Services Overview</h2>

    <p class="text-muted mb-3">
        Found <strong th:text="${services.size()}">0</strong> services
    </p>

    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead class="table-light">
            <tr>
                <th>Service</th>
                <th>URL</th>
                <th>Status</th>
                <th>Latency</th>
                <th>Last Checked</th>
            </tr>
            </thead>
            <tbody>

            <tr th:each="service : ${services}">
                <td th:text="${service.name}">Service</td>

                <td>
                    <a th:href="${service.url}"
                       th:text="${service.url}"
                       target="_blank"
                       class="text-decoration-none"></a>
                </td>

                <td>
                    <span class="badge bg-success"
                          th:if="${service.status.name() == 'UP'}">UP</span>

                    <span class="badge bg-warning text-dark"
                          th:if="${service.status.name() == 'DEGRADED'}">DEGRADED</span>

                    <span class="badge bg-danger"
                          th:if="${service.status.name() == 'DOWN'}">DOWN</span>
                </td>

                <td>
                    <span th:if="${service.latencyMs >= 0}"
                          th:text="${service.latencyMs + ' ms'}"></span>
                    <span th:if="${service.latencyMs < 0}"
                          class="text-muted">—</span>
                </td>

                <td th:text="${#temporals.format(service.lastCheckedAt, 'dd.MM.yyyy HH:mm:ss')}">
                    01.01.2025 00:00:00
                </td>
            </tr>

            </tbody>
        </table>
    </div>
</div>

</body>
</html>
